# PHPバックエンド用の.htaccessファイル

# リライトエンジンを有効にする
RewriteEngine On

# APIエンドポイントのリライトルール
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/?$ $1.php [L,QSA]

# CORS設定（必要に応じて）
<IfModule mod_headers.c>
    Header always set Access-Control-Allow-Origin "http://192.168.0.251:3000"
    Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
    Header always set Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With"
    Header always set Access-Control-Allow-Credentials "true"
</IfModule>

# セキュリティ設定
# 設定ファイルへの直接アクセスを禁止
<Files "config.php">
    Order Allow,Deny
    Deny from all
</Files>

<Files "database.php">
    Order Allow,Deny
    Deny from all
</Files>

# クラスファイルへの直接アクセスを禁止
<Files "*.php">
    <RequireAll>
        Require all granted
        Require not ip 127.0.0.1
    </RequireAll>
</Files>

# エラーページの設定
ErrorDocument 404 /api/404.php
ErrorDocument 500 /api/500.php